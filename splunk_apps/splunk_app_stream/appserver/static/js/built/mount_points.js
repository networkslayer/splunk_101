streamJsonp([4],{0:function(n,t,e){function d(n,t){if(window.$C&&window.$C.hasOwnProperty(n))return window.$C[n];if(void 0!==t)return t;throw new Error("getConfigValue - "+n+" not set, no default provided")}e.p=function(){for(var n,t,e="",i=0,o=arguments.length;i<o;i++)"/"!=(n=1<(t=(n=arguments[i].toString()).length)&&"/"==n.charAt(t-1)?n.substring(0,t-1):n).charAt(0)?e+="/"+n:e+=n;"/"==e||"static"!=(l=(s=e.split("/"))[1])&&"modules"!=l||(a=e.substring(l.length+2,e.length),e="/"+l,window.$C.BUILD_NUMBER&&(e+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(e+="."+window.$C.BUILD_PUSH_NUMBER),"app"==s[2]&&(e+=":"+d("APP_BUILD",0)),e+="/"+a);var l=d("MRSPARKLE_ROOT_PATH","/"),s=d("DJANGO_ROOT_PATH",""),a=d("LOCALE","en-US"),r="",r=s&&e.substring(0,s.length)===s?e.replace(s,s+"/"+a.toLowerCase()):"/"+a+e;return""==l||"/"==l?r:l+r}("/static/app/splunk_app_stream/js/built")+"/",e=[e(1),e(2),e(6),e(12),e(75),e(82),e(7)],void 0!==(t=function(n,t,e,i,o,l,s){var a={},r=(a.mediator=new i,t.Deferred());(new l).fetch({success:function(n){r.resolve(n)},error:function(n){}}),t.when(r.promise()).done(function(e){s(function(n){var t=new o({mountPointsCollection:e,app:a});n.create().getContainerElement().appendChild(t.render().el)})})}.apply(t,e))&&(n.exports=t)},75:function(n,t,e){e=[e(1),e(2),e(6),e(3),e(76),e(77),e(78),e(80),e(30)],t=function(t,e,n,i,o,l,s,a){i.Controller;return n.View.extend({initialize:function(n){this.options=t.extend({},this.options,n),this.app=this.options.app,this.template=t.template(e(o).html()),this.collection=this.options.mountPointsCollection,this.collection.on("change add remove",this.render.bind(this));var n=location.search.split("=");2==n.length&&"?file_server"==n[0]&&(n=n[1],n=this.collection.get(n))&&(editMountPointView=new s({mountPointModel:n,collection:this.collection}).show())},events:{"keyup #mount-point-search-input":"filterTable","click a.clear":"resetSearch","click #add-file-server-mount-point":"addMountPoint"},filterTable:function(){var n=e("#mount-point-search-input").val();this.app.mediator.publish("search-filtered",n)},resetSearch:function(n){n.preventDefault(),this.render()},addMountPoint:function(n){n.preventDefault();n=new l;new s({create:!0,mountPointModel:n,collection:this.collection}).show()},render:function(){var t=this,n=t.template({mountPointCount:t.collection.length}),e=(t.$el.empty(),t.$el.append(n),t.$("#mount-point-table"));return t.collection.each(function(n){new a({model:n,app:t.app,mountPointsCollection:t.collection}).render().$el.appendTo(e)}),e.tablesorter({headers:{0:{sorter:"text"},1:{sorter:"text"},2:{sorter:!1}}}),this},removeSelf:function(){return this.unbind(),this.$el.empty(),this.undelegateEvents(),this}})}.apply(t,e);void 0!==t&&(n.exports=t)},76:function(n,t){n.exports='<script id="mount-points-template" type="text/template">\n<div id="mount-points-page">\n    <div class="container-fluid" id="mount-points-main-body">\n\n        \x3c!-- ===== --\x3e\n        \x3c!-- Title --\x3e\n        \x3c!-- ===== --\x3e\n        <div class="row-fluid top-header">\n            <div class="header-wrapper">\n              <h1 class="top-wrapper">\n                  File Server Mount Points\n                  <span id="mount-points-config-button-panel">\n                      <button id="add-file-server-mount-point" class="btn btn-primary">Add File Server</button>\n                  </span>\n              </h1>\n              <h3 class="page-subtitle">\n                   Edit mount points for known file servers or add a new one.\n              </h3>\n            </div>\n        </div>\n\n        \x3c!-- ============ --\x3e\n        \x3c!-- Search Input --\x3e\n        \x3c!-- ============ --\x3e\n        <div class="row-fluid">\n\n          <span id="mount-point-count"> <span> <%- mountPointCount %> </span> file servers </span>\n\n          <span class="table-search">\n             <input type="text" class="input-medium search-query" placeholder="Search" id="mount-point-search-input" value=""/>\n             <a class="clear"><i class="icon-x-circle"></i></a>\n          </span>\n\n        </div>\n\n        \x3c!-- ===== --\x3e\n        \x3c!-- Table --\x3e\n        \x3c!-- ===== --\x3e\n        <div class="row-fluid">\n\n           <table class="table table-chrome table-hover" id="mount-point-table">\n\n             <thead>\n                 <tr>\n                     <th style="width:45%">File Server</th>\n                     <th style="width:50%">Mount Point</th>\n                     <th style="width:5%">Actions</th>\n                 </tr>\n             </thead>\n\n             <tbody id="mount-point-table-body"></tbody>\n\n           </table>\n        </div>\n    </div>\n</div>\n<\/script>\n'},77:function(n,t,e){e=[e(2),e(1),e(6),e(3)],t=function(n,t,e,i){i=i.SplunkUtils;return e.Model.extend({urlRoot:i.make_url(["custom","splunk_app_stream","fileservermountpoints"].join("/")),idAttribute:"_key",validate:function(n,t){}})}.apply(t,e);void 0!==t&&(n.exports=t)},78:function(n,t,e){e=[e(2),e(1),e(6),e(79)],t=function(i,t,n,e){return n.View.extend({className:"modal",initialize:function(n){this.template=t.template(i(e).html()),this.create=n.create,this.mountPointModel=n.mountPointModel,this.collection=n.collection},events:{"click .save":"save","click .cancel":"cancel"},show:function(){var n=this.mountPointModel.toJSON();return this.$el.html(this.template({mountPointModel:n,create:this.create})),this.$el.on("hide",function(){this.remove()}.bind(this)),this.$el.modal("show"),this},save:function(n){var e=this;if(this.mountPointModel.isNew()){var t=i("input.file-server").val();if(!t)return void alert("Please specify a file server.");this.mountPointModel.set("id",t)}t={mount_point:i("input.mount-point").val()};t.mount_point?this.mountPointModel.save(t,{success:function(n,t){e.create&&e.collection.add(e.mountPointModel),e.$el.modal("hide"),e.remove(),location.search&&(location=location.origin+location.pathname)},error:function(n,t){alert(t.responseJSON.error)}}):alert("Please specify a mount point.")},cancel:function(){this.remove()}})}.apply(t,e);void 0!==t&&(n.exports=t)},79:function(n,t){n.exports='<script id="mount-point-editor-modal-template" type="text/template">\n    <div class="modal-dialog modal-lg">\n        <div class="modal-content">\n            <div class="modal-header">\n                <% if (create) { %>\n                <h4 class="modal-title">Add File Server and Mount Point</h4>\n                <% } else { %>\n                <h4 class="modal-title">Edit Mount Point</h4>\n                <% } %>\n            </div>\n            <div class="modal-body">\n                <div class="container-fluid">\n                     \x3c!-- =========== --\x3e\n                     \x3c!-- File Server --\x3e\n                     \x3c!-- =========== --\x3e\n                     <div class="row-fluid">\n                        <div class="span4">File Server: </div>\n                        <div class="span8 ce-field">\n                             <input type="text"\n                                    class="file-server"\n                                    placeholder="required"\n                                    value="<%- mountPointModel.id %>"\n                                    <% if (! create) { %> disabled <% } %> >\n                        </div>\n                     </div>\n\n                     \x3c!-- =========== --\x3e\n                     \x3c!-- Mount Point --\x3e\n                     \x3c!-- =========== --\x3e\n                     <div class="row-fluid">\n                        <div class="span4">Mount Point: </div>\n                        <div class="span8 ce-field">\n                             <input type="text"\n                                    class="mount-point"\n                                    placeholder="required"\n                                    value="<%- mountPointModel.mount_point %>"\n                                    >\n                        </div>\n                     </div>\n                </div>\n            </div>\n            <div class="modal-footer">\n                <a href="#" data-dismiss="modal" aria-hidden="true" class="btn cancel">Cancel</a>\n                <% if (create) { %>\n                <a href="#" class="btn btn-primary save">Create</a>\n                <% } else { %>\n                <a href="#" class="btn btn-primary save">Save</a>\n                <% } %>\n            </div>\n        </div>\n    </div>\n<\/script>\n'},80:function(n,t,e){e=[e(2),e(1),e(6),e(81),e(78),e(46),e(3)],t=function(e,i,n,o,t,l,s){let a=s.Popdown;return n.View.extend({tagName:"tr",className:"mount-point-table-row",attributes:function(){return{"data-id":this.model.get("id")}},initialize:function(n){this.app=n.app,this.template=i.template(e(o).html()),this.model=n.model;var t=this;this.app.mediator.subscribe("search-filtered",function(n){t._showHideBasedOnRegex(n)}),this.listenTo(this.model,"change",function(){t.render()})},_showHideBasedOnRegex:function(n){var t=new RegExp(n,"i"),n=i.flatten([this.model.get("id"),this.model.get("mount_point")]);i.some(i.map(n,function(n){return t.test(n)}))?this.$el.show():this.$el.hide()},events:{"click .mount-point-edit":"editMountPoint","click .mount-point-delete":"deleteMountPoint"},editMountPoint:function(n){n.preventDefault();new t({mountPointModel:this.model}).show()},deleteMountPoint:function(n){n.preventDefault();var t=this.model;new l({action:"delete",model:{text:this.model.get("id")},command:function(){t.destroy({success:function(n,t){},error:function(){alert("error: failed to delete"),location.reload()}})}}).show()},render:function(){return this.$el.html(this.template({model:this.model.toJSON()})),new a({el:this.$(".mount-point-action-popdown")}),this.model.has("mount_point")&&""!=this.model.get("mount_point")||e(this.el).addClass("missing-mount-point"),this},removeSelf:function(){return this.unbind(),this.$el.empty(),this.undelegateEvents(),this}})}.apply(t,e);void 0!==t&&(n.exports=t)},81:function(n,t){n.exports='<script id="mount-point-table-row-template" type="text/template">\n\n        \x3c!-- =========== --\x3e\n        \x3c!-- File Server --\x3e\n        \x3c!-- =========== --\x3e\n        <td>\n            <%- model.id %>\n        </td>\n\n        \x3c!-- =========== --\x3e\n        \x3c!-- Mount Point --\x3e\n        \x3c!-- =========== --\x3e\n        <td>\n            <% if (model.mount_point) { %>\n            <%- model.mount_point %>\n            <% } else { %>\n            <div class="alert alert-error"><i class="icon-alert"></i></div>\n            <% } %>\n        </td>\n\n        \x3c!-- ======= --\x3e\n        \x3c!-- Actions --\x3e\n        \x3c!-- ======= --\x3e\n        <td>\n            <div class="mount-point-action-popdown btn-combo">\n                <a class="dropdown-toggle btn-pill" href="#"><span class="icon-chevron-down"></span></a>\n\n                <div class="dropdown-menu dropdown-menu-narrow">\n                    <div class="arrow"></div>\n                    <ul>\n                        <li><a href="#" class="mount-point-edit">Edit Mount Point</a></li>\n                        <li><a href="#" class="mount-point-delete">Delete</a></li>\n                    </ul>\n                </div>\n            </div>\n        </td>\n<\/script>\n'},82:function(n,t,e){e=[e(2),e(1),e(6),e(77),e(3)],t=function(n,t,e,i,o){o=o.SplunkUtils;return e.Collection.extend({model:i,url:o.make_url(["custom","splunk_app_stream","fileservermountpoints"].join("/")),comparator:"id"})}.apply(t,e);void 0!==t&&(n.exports=t)}});
//# sourceMappingURL=mount_points.js.map